# –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ —Ç–∞ –∞–∫—Ç–∏–≤–Ω—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

## –ü–ª–∞–Ω –ª–µ–∫—Ü—ñ—ó

1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
2. –¢—Ä–∏–≥–µ—Ä–∏: —Å–µ–º–∞–Ω—Ç–∏–∫–∞ —Ç–∞ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è
3. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ–¥—ñ—è–º–∏ —Ç–∞ –ø—Ä–∞–≤–∏–ª–∞–º–∏
4. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è (VIEW)
5. –ö–æ–º–ø—Ä–æ–º—ñ—Å–∏: —Å–µ—Ä–≤–µ—Ä vs –∫–ª—ñ—î–Ω—Ç

## **üéØ –ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó**

**–ó–±–µ—Ä–µ–∂–µ–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞** ‚Äî —ñ–º–µ–Ω–æ–≤–∞–Ω–∏–π –±–ª–æ–∫ –∫–æ–¥—É, —â–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –ë–î —Ç–∞ –≤–∏–∫–æ–Ω—É—î –ø–µ–≤–Ω—ñ –¥—ñ—ó.

**–¢—Ä–∏–≥–µ—Ä** ‚Äî —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –ø–æ–¥—ñ—ó –≤ –ë–î.

**–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è (VIEW)** ‚Äî –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è, —â–æ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ SQL-–∑–∞–ø–∏—Ç—É.

**–ê–∫—Ç–∏–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö** ‚Äî –ë–î, —è–∫–∞ –º–æ–∂–µ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ —Ä–µ–∞–≥—É–≤–∞—Ç–∏ –Ω–∞ –ø–æ–¥—ñ—ó –±–µ–∑ —è–≤–Ω–∏—Ö –∫–æ–º–∞–Ω–¥ –≤—ñ–¥ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

## **1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è**

## –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è SQL

### üîß **–ö–æ–∂–Ω–∞ –°–£–ë–î –º–∞—î –≤–ª–∞—Å–Ω—É –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—É –º–æ–≤—É:**

- **PostgreSQL:** PL/pgSQL
- **Oracle:** PL/SQL
- **SQL Server:** T-SQL
- **MySQL:** SQL/PSM

### üí° **–ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ?**

SQL ‚Äî –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞ –º–æ–≤–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –º–Ω–æ–∂–∏–Ω–∞–º–∏ –¥–∞–Ω–∏—Ö, –∞–ª–µ:

- –û–±–º–µ–∂–µ–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞ –ª–æ–≥—ñ–∫–∞
- –ù–µ–º–∞—î —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å
- –í—ñ–¥—Å—É—Ç–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–æ–º

## –ü—Ä–∏–∫–ª–∞–¥: PL/pgSQL

```sql
CREATE OR REPLACE FUNCTION calculate_order_total(order_id_param INTEGER)
RETURNS NUMERIC AS $$
DECLARE
    total_amount NUMERIC := 0;
    item_record RECORD;
BEGIN
    -- –û–±—á–∏—Å–ª–µ–Ω–Ω—è —Å—É–º–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
    FOR item_record IN
        SELECT quantity, unit_price
        FROM order_items
        WHERE order_id = order_id_param
    LOOP
        total_amount := total_amount +
            (item_record.quantity * item_record.unit_price);
    END LOOP;

    RETURN total_amount;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RETURN 0;
END;
$$ LANGUAGE plpgsql;
```

## –û—Å–Ω–æ–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏

### üì¶ **–ó–º—ñ–Ω–Ω—ñ —Ç–∞ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö:**

```sql
DECLARE
    total_sales NUMERIC(10,2);
    customer_name VARCHAR(100);
    order_date DATE := CURRENT_DATE;
    is_premium BOOLEAN := FALSE;
```

### üîÑ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è:**

```sql
-- –£–º–æ–≤–Ω—ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
IF total_amount > 1000 THEN
    discount_rate := 0.10;
ELSIF total_amount > 500 THEN
    discount_rate := 0.05;
ELSE
    discount_rate := 0;
END IF;

-- –¶–∏–∫–ª–∏
FOR counter IN 1..10 LOOP
    INSERT INTO logs (message)
    VALUES ('–Ü—Ç–µ—Ä–∞—Ü—ñ—è ' || counter);
END LOOP;
```

## –ü—Ä–æ—Ü–µ–¥—É—Ä–∏ vs –§—É–Ω–∫—Ü—ñ—ó

### ‚öôÔ∏è **–ó–±–µ—Ä–µ–∂–µ–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞:**

- –í–∏–∫–æ–Ω—É—î –¥—ñ—ó, –º–æ–∂–µ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è
- –ú–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω –ë–î
- –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —á–µ—Ä–µ–∑ OUT –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

### üî¢ **–§—É–Ω–∫—Ü—ñ—è:**

- –ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É –≤–∏—Ä–∞–∑–∞—Ö SQL
- –ù–µ –ø–æ–≤–∏–Ω–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω (—Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–æ)

```sql
-- –§—É–Ω–∫—Ü—ñ—è
SELECT get_customer_discount(1001);

-- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞
CALL process_monthly_billing();
```

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è

### ‚úÖ **–ö–ª—é—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:**

1. **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏** ‚Äî —î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–∏–ª
2. **–ó–º–µ–Ω—à–µ–Ω–Ω—è —Ç—Ä–∞—Ñ—ñ–∫—É** ‚Äî –æ–±—Ä–æ–±–∫–∞ –±—ñ–ª—è –¥–∞–Ω–∏—Ö
3. **–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω–∞ —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å** ‚Äî –≤—Å–µ –≤ –æ–¥–Ω—ñ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
4. **–ë–µ–∑–ø–µ–∫–∞** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏
5. **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** ‚Äî –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

```mermaid
graph LR
    A[–ö–ª—ñ—î–Ω—Ç] -->|1 –≤–∏–∫–ª–∏–∫| B[–ë–î]
    B -->|–æ–±—Ä–æ–±–∫–∞| C[–ü—Ä–æ—Ü–µ–¥—É—Ä–∞]
    C -->|—Ä–µ–∑—É–ª—å—Ç–∞—Ç| A

    D[–ö–ª—ñ—î–Ω—Ç –±–µ–∑ –ø—Ä–æ—Ü–µ–¥—É—Ä] -->|–∑–∞–ø–∏—Ç 1| E[–ë–î]
    E -->|–¥–∞–Ω—ñ 1| D
    D -->|–∑–∞–ø–∏—Ç 2| E
    E -->|–¥–∞–Ω—ñ 2| D
    D -->|–∑–∞–ø–∏—Ç 3| E
    E -->|–¥–∞–Ω—ñ 3| D
```

## **2. –¢—Ä–∏–≥–µ—Ä–∏**

## –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è —Ç—Ä–∏–≥–µ—Ä—ñ–≤

### üéØ **–©–æ —Ç–∞–∫–µ —Ç—Ä–∏–≥–µ—Ä?**

–°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞, —â–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞:

- INSERT ‚Äî –≤—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
- UPDATE ‚Äî –∑–º—ñ–Ω–∞ —ñ—Å–Ω—É—é—á–∏—Ö –¥–∞–Ω–∏—Ö
- DELETE ‚Äî –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

### üìã **–ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```sql
CREATE TRIGGER trigger_name
    {BEFORE | AFTER | INSTEAD OF}
    {INSERT | UPDATE | DELETE}
    ON table_name
    [FOR EACH {ROW | STATEMENT}]
    EXECUTE FUNCTION function_name();
```

## –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∑–∞ —á–∞—Å–æ–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

```mermaid
graph TD
    A[–ü–û–î–Ü–Ø –Ω–∞ —Ç–∞–±–ª–∏—Ü—ñ] --> B{–¢–∏–ø —Ç—Ä–∏–≥–µ—Ä–∞?}

    B -->|BEFORE| C[–í–∏–∫–æ–Ω–∞–Ω–Ω—è BEFORE —Ç—Ä–∏–≥–µ—Ä–∞]
    C --> D[–ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö]
    D --> E[–í–∏–∫–æ–Ω–∞–Ω–Ω—è AFTER —Ç—Ä–∏–≥–µ—Ä–∞]
    E --> F[–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è]

    B -->|AFTER| D
    D --> E

    B -->|INSTEAD OF| G[–í–∏–∫–æ–Ω–∞–Ω–Ω—è INSTEAD OF]
    G --> F
```

### ‚è∞ **–¢—Ä–∏ —Ç–∏–ø–∏:**

- **BEFORE** ‚Äî –¥–æ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏/—Å–∫–∞—Å—É–≤–∞—Ç–∏
- **AFTER** ‚Äî –ø—ñ—Å–ª—è –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –¥–ª—è –∫–∞—Å–∫–∞–¥–Ω–∏—Ö –∑–º—ñ–Ω
- **INSTEAD OF** ‚Äî –∑–∞–º—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ—ó, –¥–ª—è VIEW

## BEFORE —Ç—Ä–∏–≥–µ—Ä–∏

### ‚úèÔ∏è **–í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º:**

```sql
CREATE OR REPLACE FUNCTION validate_employee_salary()
RETURNS TRIGGER AS $$
BEGIN
    -- –í–∞–ª—ñ–¥–∞—Ü—ñ—è
    IF NEW.salary < 0 THEN
        RAISE EXCEPTION '–ó–∞—Ä–ø–ª–∞—Ç–∞ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥''—î–º–Ω–æ—é';
    END IF;

    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è
    NEW.salary := ROUND(NEW.salary, 2);

    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è
    NEW.last_modified := CURRENT_TIMESTAMP;

    -- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–∞–∫—Å–∏–º—É–º—É
    IF NEW.salary > (SELECT max_salary
                     FROM positions
                     WHERE position_id = NEW.position_id) THEN
        RAISE EXCEPTION '–ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –º–∞–∫—Å–∏–º—É–º –¥–ª—è –ø–æ—Å–∞–¥–∏';
    END IF;

    RETURN NEW; -- –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Å
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER check_employee_salary
    BEFORE INSERT OR UPDATE ON employees
    FOR EACH ROW
    EXECUTE FUNCTION validate_employee_salary();
```

## AFTER —Ç—Ä–∏–≥–µ—Ä–∏

### üìä **–ö–∞—Å–∫–∞–¥–Ω—ñ –∑–º—ñ–Ω–∏ —Ç–∞ –∞—É–¥–∏—Ç:**

```sql
CREATE OR REPLACE FUNCTION audit_salary_changes()
RETURNS TRIGGER AS $$
BEGIN
    -- –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–º—ñ–Ω
    INSERT INTO salary_audit (
        employee_id,
        old_salary,
        new_salary,
        changed_by,
        changed_at,
        operation_type
    ) VALUES (
        COALESCE(NEW.employee_id, OLD.employee_id),
        OLD.salary,
        NEW.salary,
        current_user,
        CURRENT_TIMESTAMP,
        TG_OP
    );

    -- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –∑–Ω–∞—á–Ω—ñ –∑–º—ñ–Ω–∏
    IF TG_OP = 'UPDATE' AND
       ABS(NEW.salary - OLD.salary) > OLD.salary * 0.10 THEN
        INSERT INTO notifications (message)
        VALUES ('–ó–Ω–∞—á–Ω–∞ –∑–º—ñ–Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç–∏: ' || NEW.employee_id);
    END IF;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

## –†—ñ–≤–Ω—ñ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—ñ

### üéöÔ∏è **ROW vs STATEMENT:**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | FOR EACH ROW | FOR EACH STATEMENT |
|----------------|--------------|-------------------|
| **–ß–∞—Å—Ç–æ—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** | –î–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä—è–¥–∫–∞ | –û–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—é |
| **–î–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö** | NEW/OLD –∑–º—ñ–Ω–Ω—ñ | –ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä—è–¥–∫—ñ–≤ |
| **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è** | –í–∞–ª—ñ–¥–∞—Ü—ñ—è, –∞—É–¥–∏—Ç | –õ–æ–≥—É–≤–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** | –ü–æ–≤—ñ–ª—å–Ω—ñ—à–µ | –®–≤–∏–¥—à–µ |

```sql
-- ROW-level: –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–º—ñ–Ω–µ–Ω–æ–≥–æ —Ä—è–¥–∫–∞
CREATE TRIGGER track_product_changes
    AFTER UPDATE ON products
    FOR EACH ROW
    EXECUTE FUNCTION maintain_product_history();

-- STATEMENT-level: –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å—ñ—î—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó
CREATE TRIGGER monitor_bulk_changes
    AFTER DELETE ON critical_data
    FOR EACH STATEMENT
    EXECUTE FUNCTION log_bulk_operations();
```

## –û–±–ª–∞—Å—Ç—ñ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Ç—Ä–∏–≥–µ—Ä—ñ–≤

### üéØ **–û—Å–Ω–æ–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**

1. **üîí –¶—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö**
    - –°–∫–ª–∞–¥–Ω—ñ –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
    - –ü–µ—Ä–µ—Ö—Ä–µ—Å–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
    - –û–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∫—ñ–ª—å–∫–∞ —Ç–∞–±–ª–∏—Ü—å

2. **üìù –ê—É–¥–∏—Ç —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è**
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø–∏—Å –∑–º—ñ–Ω
    - –ñ—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü—ñ–π
    - –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

3. **üìä –î–µ–Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è**
    - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∞–≥—Ä–µ–≥–∞—Ç—ñ–≤
    - –ö–µ—à—É–≤–∞–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω—å
    - –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

4. **üîó –ö–∞—Å–∫–∞–¥–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó**
    - –°–∫–ª–∞–¥–Ω—ñ –∑–≤'—è–∑–∫–∏
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
    - –ë—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å–∏

## –ü—Ä–∏–∫–ª–∞–¥: –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ

```sql
CREATE OR REPLACE FUNCTION enforce_project_constraints()
RETURNS TRIGGER AS $$
DECLARE
    active_projects INTEGER;
    employee_capacity INTEGER;
BEGIN
    -- –ü—Ä–∞–≤–∏–ª–æ 1: –º–∞–∫—Å–∏–º—É–º 3 –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç–∏
    SELECT COUNT(*) INTO active_projects
    FROM project_assignments
    WHERE employee_id = NEW.employee_id
        AND status = 'ACTIVE';

    IF active_projects >= 3 THEN
        RAISE EXCEPTION '–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ –≤–∂–µ –ø—Ä–∞—Ü—é—î –Ω–∞–¥
                         –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø—Ä–æ—î–∫—Ç—ñ–≤';
    END IF;

    -- –ü—Ä–∞–≤–∏–ª–æ 2: –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ—Å—Ç—å –Ω–µ –±—ñ–ª—å—à–µ 100%
    SELECT COALESCE(SUM(allocation_percentage), 0)
    INTO employee_capacity
    FROM project_assignments
    WHERE employee_id = NEW.employee_id
        AND status = 'ACTIVE';

    IF employee_capacity + NEW.allocation_percentage > 100 THEN
        RAISE EXCEPTION '–ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ—Å—Ç—å';
    END IF;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

## –ü—Ä–∏–∫–ª–∞–¥: –¥–µ–Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è

```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–≥—Ä–µ–≥–∞—Ç—ñ–≤
CREATE OR REPLACE FUNCTION update_order_statistics()
RETURNS TRIGGER AS $$
BEGIN
    -- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ—ó —Å—É–º–∏ —Ç–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–∑–∏—Ü—ñ–π
    UPDATE orders
    SET
        total_items = (
            SELECT COUNT(*)
            FROM order_items
            WHERE order_id = COALESCE(NEW.order_id, OLD.order_id)
        ),
        total_amount = (
            SELECT COALESCE(SUM(quantity * unit_price), 0)
            FROM order_items
            WHERE order_id = COALESCE(NEW.order_id, OLD.order_id)
        ),
        last_modified = CURRENT_TIMESTAMP
    WHERE order_id = COALESCE(NEW.order_id, OLD.order_id);

    RETURN COALESCE(NEW, OLD);
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER maintain_order_totals
    AFTER INSERT OR UPDATE OR DELETE ON order_items
    FOR EACH ROW
    EXECUTE FUNCTION update_order_statistics();
```

## **3. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ–¥—ñ—è–º–∏**

## –ú–æ–¥–µ–ª—å ECA

### üìê **Event-Condition-Action:**

```mermaid
graph LR
    A[EVENT<br/>–ü–æ–¥—ñ—è] --> B{CONDITION<br/>–£–º–æ–≤–∞ –≤–∏–∫–æ–Ω–∞–Ω–∞?}
    B -->|–¢–∞–∫| C[ACTION<br/>–í–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—é]
    B -->|–ù—ñ| D[–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏]
```

### üéØ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**

- **Event** ‚Äî —â–æ –≤–∏–∫–ª–∏–∫–∞—î –ø—Ä–∞–≤–∏–ª–æ (INSERT, UPDATE, DELETE, —á–∞—Å)
- **Condition** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–º–æ–≤–∏ –ø—ñ—Å–ª—è –ø–æ–¥—ñ—ó
- **Action** ‚Äî —â–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è, —è–∫—â–æ —É–º–æ–≤–∞ —Å–ø—Ä–∞–≤–¥–∂—É—î—Ç—å—Å—è

## –ü—Ä–∏–∫–ª–∞–¥ ECA –º–æ–¥–µ–ª—ñ

```sql
CREATE OR REPLACE FUNCTION eca_low_stock_alert()
RETURNS TRIGGER AS $$
BEGIN
    -- EVENT: UPDATE –Ω–∞ inventory

    -- CONDITION: —Ä—ñ–≤–µ–Ω—å –∑–∞–ø–∞—Å—ñ–≤ –Ω–∏–∂—á–µ –ø–æ—Ä–æ–≥—É
    IF NEW.stock_quantity < (
        SELECT reorder_level
        FROM products
        WHERE product_id = NEW.product_id
    ) AND NEW.stock_quantity < OLD.stock_quantity THEN

        -- ACTION 1: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—É
        INSERT INTO purchase_orders (product_id, supplier_id, quantity)
        SELECT NEW.product_id, preferred_supplier_id, optimal_order_quantity
        FROM products WHERE product_id = NEW.product_id;

        -- ACTION 2: –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
        INSERT INTO notifications (type, message, priority)
        VALUES (
            'LOW_STOCK_ALERT',
            format('–ù–∏–∑—å–∫–∏–π —Ä—ñ–≤–µ–Ω—å –∑–∞–ø–∞—Å—ñ–≤ –¥–ª—è —Ç–æ–≤–∞—Ä—É %s', NEW.product_id),
            'HIGH'
        );
    END IF;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

## –°–∫–ª–∞–¥–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞

### üß© **–ú–Ω–æ–∂–∏–Ω–Ω—ñ —É–º–æ–≤–∏ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**

```sql
CREATE OR REPLACE FUNCTION complex_pricing_rule()
RETURNS TRIGGER AS $$
DECLARE
    customer_tier VARCHAR(20);
    seasonal_discount NUMERIC;
BEGIN
    -- –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∫–ª—ñ—î–Ω—Ç–∞
    SELECT
        CASE
            WHEN total_spent > 50000 THEN 'PLATINUM'
            WHEN total_spent > 20000 THEN 'GOLD'
            WHEN total_spent > 5000 THEN 'SILVER'
            ELSE 'STANDARD'
        END INTO customer_tier
    FROM customers WHERE customer_id = NEW.customer_id;

    -- –ë–∞–∑–æ–≤–∞ —Ü—ñ–Ω–∞
    NEW.unit_price := (SELECT base_price FROM products
                       WHERE product_id = NEW.product_id);

    -- –ó–Ω–∏–∂–∫–∞ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é
    NEW.unit_price := NEW.unit_price * (
        CASE customer_tier
            WHEN 'PLATINUM' THEN 0.85
            WHEN 'GOLD' THEN 0.90
            WHEN 'SILVER' THEN 0.95
            ELSE 1.0
        END
    );

    -- –ó–Ω–∏–∂–∫–∞ –∑–∞ –æ–±—Å—è–≥
    IF NEW.quantity >= 100 THEN
        NEW.unit_price := NEW.unit_price * 0.90;
    END IF;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

## –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ª–∞–Ω—Ü—é–∂–∫–∞–º–∏ —Ç—Ä–∏–≥–µ—Ä—ñ–≤

### ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞: —Ü–∏–∫–ª—ñ—á–Ω—ñ –≤–∏–∫–ª–∏–∫–∏**

```mermaid
graph TD
    A[UPDATE table_a] --> B[Trigger A]
    B --> C[UPDATE table_b]
    C --> D[Trigger B]
    D --> E[UPDATE table_a]
    E --> B
```

### üõ°Ô∏è **–†—ñ—à–µ–Ω–Ω—è: –∫–æ–Ω—Ç—Ä–æ–ª—å –≥–ª–∏–±–∏–Ω–∏:**

```sql
CREATE OR REPLACE FUNCTION prevent_trigger_recursion()
RETURNS TRIGGER AS $$
DECLARE
    current_depth INTEGER;
    max_depth CONSTANT INTEGER := 5;
BEGIN
    -- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥–ª–∏–±–∏–Ω–∏ –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ
    SELECT COALESCE(MAX(depth), 0) INTO current_depth
    FROM trigger_execution_context
    WHERE trigger_name = TG_NAME
        AND started_at > CURRENT_TIMESTAMP - INTERVAL '1 second';

    IF current_depth >= max_depth THEN
        RAISE EXCEPTION '–í–∏—è–≤–ª–µ–Ω–æ —Ü–∏–∫–ª—ñ—á–Ω–∏–π –≤–∏–∫–ª–∏–∫ —Ç—Ä–∏–≥–µ—Ä–∞ %', TG_NAME;
    END IF;

    -- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
    INSERT INTO trigger_execution_context (trigger_name, depth)
    VALUES (TG_NAME, current_depth + 1);

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

## **4. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è (VIEW)**

## –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—å

### üñºÔ∏è **VIEW ‚Äî –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è:**

- –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ SQL-–∑–∞–ø–∏—Ç—ñ
- –ù–µ –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ —Ñ—ñ–∑–∏—á–Ω–æ
- –û–±—á–∏—Å–ª—é—î—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ –ø—Ä–∏ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—ñ
- –°–ø—Ä–æ—â—É—î —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏

```sql
-- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è
CREATE VIEW employee_summary AS
SELECT
    e.employee_id,
    e.first_name || ' ' || e.last_name AS full_name,
    d.department_name,
    p.position_name,
    e.salary,
    EXTRACT(YEAR FROM AGE(CURRENT_DATE, e.hire_date)) AS years_employed
FROM employees e
JOIN departments d ON e.department_id = d.department_id
JOIN positions p ON e.position_id = p.position_id
WHERE e.status = 'ACTIVE';

-- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —è–∫ –∑–≤–∏—á–∞–π–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ
SELECT * FROM employee_summary
WHERE years_employed > 5;
```

## –ü–µ—Ä–µ–≤–∞–≥–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—å

### ‚úÖ **–ö–ª—é—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:**

1. **üé≠ –ê–±—Å—Ç—Ä–∞–∫—Ü—ñ—è —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ**
    - –ü—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è JOIN-–æ–ø–µ—Ä–∞—Ü—ñ–π
    - –°–ø—Ä–æ—â–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
    - –Ü–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—è –ª–æ–≥—ñ–∫–∏

2. **üîí –ë–µ–∑–ø–µ–∫–∞**
    - –û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É
    - –ü—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö
    - –ì—Ä–∞–Ω—É–ª—è—Ä–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å

3. **üîÑ –õ–æ–≥—ñ—á–Ω–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å**
    - –ó–º—ñ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞–±–ª–∏—Ü—å
    - –°—Ç–∞–±—ñ–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    - –ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å

4. **üìä –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**
    - –ü–æ–ø–µ—Ä–µ–¥–Ω—î –æ–±—á–∏—Å–ª–µ–Ω–Ω—è
    - –ú–∞—Ç–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
    - –Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è

## –ü—Ä–∏–∫–ª–∞–¥: –±–µ–∑–ø–µ–∫–∞ —á–µ—Ä–µ–∑ VIEW

```sql
-- –ü–æ–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü—è —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ (–∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–∞)
CREATE TABLE employees (
    employee_id INT,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    email VARCHAR(100),
    salary NUMERIC(10,2),      -- –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ
    ssn VARCHAR(11),            -- –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ
    department_id INT
);

-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è HR (–±–µ–∑ –∑–∞—Ä–ø–ª–∞—Ç–∏)
CREATE VIEW hr_employee_view AS
SELECT
    employee_id,
    first_name,
    last_name,
    email,
    department_id
FROM employees;

-- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤ (—Ç—ñ–ª—å–∫–∏ —ó—Ö –≤—ñ–¥–¥—ñ–ª)
CREATE VIEW manager_employee_view AS
SELECT
    employee_id,
    first_name,
    last_name,
    email
FROM employees
WHERE department_id = (
    SELECT department_id
    FROM employees
    WHERE employee_id = current_user_id()
);

-- –ù–∞–¥–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É
GRANT SELECT ON hr_employee_view TO hr_staff;
GRANT SELECT ON manager_employee_view TO managers;
REVOKE ALL ON employees FROM hr_staff, managers;
```

## –û–Ω–æ–≤–ª—é–≤–∞–Ω—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è

### ‚úèÔ∏è **–ö—Ä–∏—Ç–µ—Ä—ñ—ó –æ–Ω–æ–≤–ª—é–≤–∞–Ω–æ—Å—Ç—ñ:**

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –º–æ–∂–µ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ INSERT/UPDATE/DELETE, —è–∫—â–æ:
- –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –æ–¥–Ω—ñ–π —Ç–∞–±–ª–∏—Ü—ñ
- –ù–µ–º–∞—î –∞–≥—Ä–µ–≥–∞—Ç–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- –ù–µ–º–∞—î DISTINCT, GROUP BY, HAVING
- –ù–µ–º–∞—î UNION, INTERSECT
- –í–∫–ª—é—á–∞—î –≤—Å—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ —Å—Ç–æ–≤–ø—Ü—ñ

```sql
-- –û–Ω–æ–≤–ª—é–≤–∞–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è
CREATE VIEW active_employees AS
SELECT
    employee_id,
    first_name,
    last_name,
    email,
    salary
FROM employees
WHERE status = 'ACTIVE';

-- –û–ø–µ—Ä–∞—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ
UPDATE active_employees
SET salary = salary * 1.05
WHERE department_id = 10;

INSERT INTO active_employees (first_name, last_name, email)
VALUES ('–Ü–≤–∞–Ω', '–ü–µ—Ç—Ä–µ–Ω–∫–æ', 'ivan@company.com');
```

## INSTEAD OF —Ç—Ä–∏–≥–µ—Ä–∏

### üîÑ **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—å:**

```sql
-- –°–∫–ª–∞–¥–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∑ JOIN
CREATE VIEW employee_department_view AS
SELECT
    e.employee_id,
    e.first_name,
    e.last_name,
    d.department_id,
    d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id;

-- INSTEAD OF —Ç—Ä–∏–≥–µ—Ä –¥–ª—è UPDATE
CREATE OR REPLACE FUNCTION update_employee_department()
RETURNS TRIGGER AS $$
BEGIN
    -- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤
    UPDATE employees
    SET
        first_name = NEW.first_name,
        last_name = NEW.last_name
    WHERE employee_id = NEW.employee_id;

    -- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤
    IF OLD.department_name IS DISTINCT FROM NEW.department_name THEN
        UPDATE departments
        SET department_name = NEW.department_name
        WHERE department_id = NEW.department_id;
    END IF;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_employee_dept_view
    INSTEAD OF UPDATE ON employee_department_view
    FOR EACH ROW
    EXECUTE FUNCTION update_employee_department();
```

## –ú–∞—Ç–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è

### üíæ **Materialized VIEW ‚Äî —Ñ—ñ–∑–∏—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è:**

```mermaid
graph LR
    A[–ó–≤–∏—á–∞–π–Ω–µ VIEW] -->|–ó–∞–ø–∏—Ç| B[–û–±—á–∏—Å–ª–µ–Ω–Ω—è]
    B --> C[–†–µ–∑—É–ª—å—Ç–∞—Ç]

    D[–ú–∞—Ç–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–µ VIEW] --> E[–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ]
    E -->|–®–≤–∏–¥–∫–æ| F[–†–µ–∑—É–ª—å—Ç–∞—Ç]

    G[–ó–º—ñ–Ω–∏ –≤ —Ç–∞–±–ª–∏—Ü—è—Ö] -->|REFRESH| E
```

### ‚ö° **–ü–µ—Ä–µ–≤–∞–≥–∏:**

- –®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Å–∫–ª–∞–¥–Ω–∏—Ö –∞–≥—Ä–µ–≥–∞—Ü—ñ–π
- –§—ñ–∑–∏—á–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏
- –ö–µ—à—É–≤–∞–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω—å

### ‚ö†Ô∏è **–ù–µ–¥–æ–ª—ñ–∫–∏:**

- –ü–æ—Ç—Ä–µ–±—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- –ó–∞–π–º–∞—î –º—ñ—Å—Ü–µ –Ω–∞ –¥–∏—Å–∫—É
- –ú–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –¥–∞–Ω—ñ

## –ü—Ä–∏–∫–ª–∞–¥ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ VIEW

```sql
-- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ –∞–≥—Ä–µ–≥–∞—Ü—ñ—è–º–∏
CREATE MATERIALIZED VIEW sales_analytics AS
SELECT
    p.category,
    DATE_TRUNC('month', o.order_date) AS month,
    COUNT(DISTINCT o.order_id) AS orders_count,
    SUM(oi.quantity * oi.unit_price) AS total_revenue,
    AVG(oi.quantity * oi.unit_price) AS avg_order_value
FROM products p
JOIN order_items oi ON p.product_id = oi.product_id
JOIN orders o ON oi.order_id = o.order_id
WHERE o.status = 'COMPLETED'
GROUP BY p.category, DATE_TRUNC('month', o.order_date);

-- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É
CREATE INDEX idx_sales_analytics_category_month
ON sales_analytics(category, month);

-- –ó–∞–ø–∏—Ç–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ
SELECT * FROM sales_analytics
WHERE month >= '2025-01-01'
ORDER BY total_revenue DESC;

-- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
REFRESH MATERIALIZED VIEW sales_analytics;

-- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–Ω–µ –±–ª–æ–∫—É—î —á–∏—Ç–∞–Ω–Ω—è)
REFRESH MATERIALIZED VIEW CONCURRENTLY sales_analytics;
```

## –°—Ç—Ä–∞—Ç–µ–≥—ñ—ó –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### üîÑ **–¢—Ä–∏ –ø—ñ–¥—Ö–æ–¥–∏:**

1. **–ü–æ–≤–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**
    - –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö
    - REFRESH MATERIALIZED VIEW
    - –ü—Ä–æ—Å—Ç–æ, –∞–ª–µ –ø–æ–≤—ñ–ª—å–Ω–æ

2. **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**
    - –ù–µ –±–ª–æ–∫—É—î —á–∏—Ç–∞–Ω–Ω—è
    - REFRESH MATERIALIZED VIEW CONCURRENTLY
    - –ü–æ—Ç—Ä–µ–±—É—î —É–Ω—ñ–∫–∞–ª—å–Ω–æ–≥–æ —ñ–Ω–¥–µ–∫—Å—É

3. **–Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**
    - –¢—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–µ–Ω—ñ –¥–∞–Ω—ñ
    - –ß–µ—Ä–µ–∑ —Ç—Ä–∏–≥–µ—Ä–∏
    - –ù–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ

```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
CREATE OR REPLACE FUNCTION refresh_sales_analytics()
RETURNS void AS $$
BEGIN
    REFRESH MATERIALIZED VIEW CONCURRENTLY sales_analytics;

    INSERT INTO refresh_log (view_name, refreshed_at)
    VALUES ('sales_analytics', CURRENT_TIMESTAMP);
END;
$$ LANGUAGE plpgsql;

-- –©–æ–¥–µ–Ω–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ pg_cron
SELECT cron.schedule(
    'refresh-sales',
    '0 2 * * *',  -- —â–æ–¥–Ω—è –æ 2:00
    'SELECT refresh_sales_analytics()'
);
```

## **5. –°–µ—Ä–≤–µ—Ä vs –ö–ª—ñ—î–Ω—Ç**

## –õ–æ–≥—ñ–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –ë–î

### ‚úÖ **–ü–µ—Ä–µ–≤–∞–≥–∏:**

1. **üéØ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–∞—Ü—ñ—è** ‚Äî —î–¥–∏–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—Å—ñ—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤
2. **‚ö° –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** ‚Äî –æ–±—Ä–æ–±–∫–∞ –±—ñ–ª—è –¥–∞–Ω–∏—Ö, –º–µ–Ω—à–µ —Ç—Ä–∞—Ñ—ñ–∫—É
3. **üîí –¶—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó, ACID –≥–∞—Ä–∞–Ω—Ç—ñ—ó
4. **üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ —Ä—ñ–≤–Ω—ñ –ë–î

### ‚ùå **–ù–µ–¥–æ–ª—ñ–∫–∏:**

1. **üîó –ü—Ä–∏–≤'—è–∑–∫–∞ –¥–æ –°–£–ë–î** ‚Äî –∫–æ–∂–Ω–∞ –º–∞—î —Å–≤—ñ–π –¥—ñ–∞–ª–µ–∫—Ç
2. **üß™ –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** ‚Äî –æ–±–º–µ–∂–µ–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
3. **üìà –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è** ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ –∫–æ—à—Ç–æ–≤–Ω—ñ—à–µ
4. **üîÑ –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è** ‚Äî —Å–∫–ª–∞–¥–Ω—ñ—à–µ –∫–µ—Ä—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∞–º–∏

```sql
-- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ø—Ä–∞–≤–∏–ª–æ –≤ –ë–î
CREATE OR REPLACE FUNCTION validate_credit_limit()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.credit_limit > 100000 AND NEW.credit_rating < 'A' THEN
        RAISE EXCEPTION '–í–∏—Å–æ–∫–∏–π –ª—ñ–º—ñ—Ç —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥—É A';
    END IF;

    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—ó
    IF EXISTS (
        SELECT 1 FROM payment_defaults
        WHERE customer_id = NEW.customer_id AND resolved = FALSE
    ) THEN
        NEW.credit_limit := LEAST(NEW.credit_limit, 10000);
    END IF;

    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- –í–°–Ü –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ—Ç—Ä–∏–º—É—é—Ç—å—Å—è —Ü–∏—Ö –ø—Ä–∞–≤–∏–ª
```

## –õ–æ–≥—ñ–∫–∞ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

### ‚úÖ **–ü–µ—Ä–µ–≤–∞–≥–∏:**

1. **üöÄ –ì–Ω—É—á–∫—ñ—Å—Ç—å —Ä–æ–∑—Ä–æ–±–∫–∏** ‚Äî –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—ñ –º–æ–≤–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
2. **üß™ –ö—Ä–∞—â–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, –º–æ–∫–∏
3. **üì¶ –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è** ‚Äî Git, CI/CD, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏
4. **üìà –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è** ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ, –¥–µ—à–µ–≤—à–µ

### ‚ùå **–ù–µ–¥–æ–ª—ñ–∫–∏:**

1. **üîÑ –î—É–±–ª—é–≤–∞–Ω–Ω—è** ‚Äî —Ä—ñ–∑–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ –º–æ–∂—É—Ç—å –º–∞—Ç–∏ —Ä—ñ–∑–Ω—É –ª–æ–≥—ñ–∫—É
2. **üì° –ú–µ—Ä–µ–∂–µ–≤–∏–π —Ç—Ä–∞—Ñ—ñ–∫** ‚Äî –±—ñ–ª—å—à–µ –∑–≤–µ—Ä–Ω–µ–Ω—å –¥–æ –ë–î
3. **‚ö†Ô∏è –†–∏–∑–∏–∫–∏ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ** ‚Äî —Å–∫–ª–∞–¥–Ω—ñ—à–µ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å

```python
# –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
class OrderProcessor:
    def calculate_discount(self, customer_id: int, order_total: float) -> float:
        customer = self.db.get_customer(customer_id)

        # –°–∫–ª–∞–¥–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∑ ML
        discount = customer.tier_discount

        if self._is_birthday_month(customer):
            discount += 0.05

        if self._has_referrals(customer):
            discount += 0.03

        # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º —Å–µ—Ä–≤—ñ—Å–æ–º
        seasonal = PromotionService.get_current_discount()
        discount = max(discount, seasonal)

        return min(discount, 0.30)
```

## –ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥

### üéØ **–ù–∞–π–∫—Ä–∞—â–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞:**

```mermaid
graph TB
    A[–ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞] --> B{–ö—Ä–∏—Ç–∏—á–Ω—ñ—Å—Ç—å?}

    B -->|–ö—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ| C[–ë–î]
    B -->|–°–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∞ –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É| D[–ö–ª—ñ—î–Ω—Ç]

    C --> E[–¢—Ä–∏–≥–µ—Ä–∏<br/>–ü—Ä–æ—Ü–µ–¥—É—Ä–∏<br/>–û–±–º–µ–∂–µ–Ω–Ω—è]
    D --> F[–°–µ—Ä–≤—ñ—Å–∏<br/>API<br/>UI –ª–æ–≥—ñ–∫–∞]
```

## –í –ë–î —Ä–æ–∑–º—ñ—â—É–≤–∞—Ç–∏:

### üîí **–ö—Ä–∏—Ç–∏—á–Ω–∞ –ª–æ–≥—ñ–∫–∞:**

- ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- ‚úÖ –ê—É–¥–∏—Ç —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω
- ‚úÖ –°–∫–ª–∞–¥–Ω—ñ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó —Ç–∞ –∑–≤—ñ—Ç–∏
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏

```sql
-- –ü—Ä–∏–∫–ª–∞–¥: –∫—Ä–∏—Ç–∏—á–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≤ –ë–î
CREATE OR REPLACE FUNCTION ensure_account_integrity()
RETURNS TRIGGER AS $
BEGIN
    -- –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞
    IF NEW.balance < 0 AND NEW.account_type != 'CREDIT' THEN
        RAISE EXCEPTION '–î–µ–±–µ—Ç–æ–≤–∏–π —Ä–∞—Ö—É–Ω–æ–∫ –Ω–µ –º–æ–∂–µ –º–∞—Ç–∏ –≤—ñ–¥''—î–º–Ω–∏–π –±–∞–ª–∞–Ω—Å';
    END IF;

    IF NEW.account_type = 'CREDIT' AND
       NEW.balance < NEW.credit_limit * -1 THEN
        RAISE EXCEPTION '–ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –∫—Ä–µ–¥–∏—Ç–Ω–∏–π –ª—ñ–º—ñ—Ç';
    END IF;

    RETURN NEW;
END;
$ LANGUAGE plpgsql;
```

## –í –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É —Ä–æ–∑–º—ñ—â—É–≤–∞—Ç–∏:

### üöÄ **–ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞:**

- ‚úÖ –õ–æ–≥—ñ–∫–∞, —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∞ –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
- ‚úÖ –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ–π–Ω–∏–π —Ä—ñ–≤–µ–Ω—å —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ API
- ‚úÖ –°–∫–ª–∞–¥–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∑ ML/AI
- ‚úÖ –õ–æ–≥—ñ–∫–∞, —â–æ —á–∞—Å—Ç–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è

```python
# –ü—Ä–∏–∫–ª–∞–¥: –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
class RecommendationEngine:
    def get_product_recommendations(self, user_id: int):
        # –°–∫–ª–∞–¥–Ω—ñ ML –∞–ª–≥–æ—Ä–∏—Ç–º–∏
        user_profile = self._build_user_profile(user_id)
        similar_users = self._find_similar_users(user_profile)
        products = self._collaborative_filtering(similar_users)

        # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏
        trending = ExternalAPI.get_trending_products()
        products = self._merge_recommendations(products, trending)

        return products[:10]
```

## –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥

### üèóÔ∏è **–ì—ñ–±—Ä–∏–¥–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:**

```sql
-- –®–∞—Ä –ë–î: –∫—Ä–∏—Ç–∏—á–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
CREATE OR REPLACE FUNCTION create_order(
    customer_id_param INTEGER,
    items JSONB
)
RETURNS INTEGER AS $
DECLARE
    new_order_id INTEGER;
BEGIN
    -- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ –ë–î
    IF NOT EXISTS (
        SELECT 1 FROM customers
        WHERE customer_id = customer_id_param AND status = 'ACTIVE'
    ) THEN
        RAISE EXCEPTION '–ö–ª—ñ—î–Ω—Ç –Ω–µ –∞–∫—Ç–∏–≤–Ω–∏–π';
    END IF;

    -- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
    INSERT INTO orders (customer_id, order_date, status)
    VALUES (customer_id_param, CURRENT_DATE, 'PENDING')
    RETURNING order_id INTO new_order_id;

    -- –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π —Ç–∞ –∑–º–µ–Ω—à–µ–Ω–Ω—è –∑–∞–ø–∞—Å—ñ–≤ (–∞—Ç–æ–º–∞—Ä–Ω–æ)
    -- ... –ª–æ–≥—ñ–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –∑–∞–ø–∞—Å—ñ–≤

    RETURN new_order_id;
END;
$ LANGUAGE plpgsql;
```

```python
# –®–∞—Ä –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É: –±—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å
class OrderService:
    def place_order(self, customer_id: int, items: List[OrderItem]):
        # –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
        self._validate_items(items)

        # –°–∫–ª–∞–¥–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–Ω–∏–∂–æ–∫
        discount = self._calculate_discount(customer_id, items)

        # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ (–∑–æ–≤–Ω—ñ—à–Ω—ñ–π API)
        shipping = self._calculate_shipping(customer_id, items)

        # –í–∏–∫–ª–∏–∫ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –ë–î
        order_id = self.db.call_function(
            'create_order',
            customer_id,
            json.dumps(items)
        )

        # –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–Ω–∏–∂–∫–∏
        total = self._calculate_total(items)
        final_total = total * (1 - discount) + shipping

        self.db.execute(
            "UPDATE orders SET total_amount = %s WHERE order_id = %s",
            (final_total, order_id)
        )

        # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞
        self._send_notifications_async(order_id)

        return Order.from_id(order_id)
```

## –ö—Ä–∏—Ç–µ—Ä—ñ—ó –≤–∏–±–æ—Ä—É


### üìä **–¢–∞–±–ª–∏—Ü—è –≤–∏–±–æ—Ä—É:**

| –ö—Ä–∏—Ç–µ—Ä—ñ–π | –ë–î | –ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ |
|----------|----|-----------|
| –¶—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö | ‚≠ê‚≠ê‚≠ê | ‚≠ê |
| –ì–Ω—É—á–∫—ñ—Å—Ç—å —Ä–æ–∑—Ä–æ–±–∫–∏ | ‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è | ‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (–≤–µ–ª–∏–∫—ñ –¥–∞–Ω—ñ) | ‚≠ê‚≠ê‚≠ê | ‚≠ê |
| –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è | ‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏ | ‚≠ê‚≠ê‚≠ê | ‚≠ê |

## –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—É

### üíº **–†–µ–∞–ª—å–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**

**E-commerce —Å–∏—Å—Ç–µ–º–∞:**

- **–ë–î:** –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ø–∞—Å—ñ–≤, —Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø—ñ–¥—Å—É–º–∫–æ–≤–æ—ó —Å—É–º–∏
- **–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫:** —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —Ç–æ–≤–∞—Ä—ñ–≤, –æ–±—Ä–æ–±–∫–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤ (API), –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ email

**–ë–∞–Ω–∫—ñ–≤—Å—å–∫–∞ —Å–∏—Å—Ç–µ–º–∞:**

- **–ë–î:** –ø–µ—Ä–µ–∫–∞–∑ –∫–æ—à—Ç—ñ–≤, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å—É, –±–ª–æ–∫—É–≤–∞–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—ñ–≤
- **–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫:** —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ —Å–∫–æ—Ä–∏–Ω–≥—É, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø–ª–∞—Ç—ñ–∂–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

**CRM —Å–∏—Å—Ç–µ–º–∞:**

- **–ë–î:** –∞—É–¥–∏—Ç –∑–º—ñ–Ω, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏
- **–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫:** –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂—ñ–≤, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ email, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—ñ–≤

## **–í–∏—Å–Ω–æ–≤–∫–∏**

1. **–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏** –¥–æ–∑–≤–æ–ª—è—é—Ç—å —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—É –ª–æ–≥—ñ–∫—É –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ –ë–î
2. **–¢—Ä–∏–≥–µ—Ä–∏** –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —Ä–µ–∞–∫—Ü—ñ—é –Ω–∞ –ø–æ–¥—ñ—ó —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
3. **–ê–∫—Ç–∏–≤–Ω—ñ –ë–î** —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å ECA –º–æ–∂—É—Ç—å —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç–∏ –¥–∞–Ω–∏–º–∏
4. **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è** –Ω–∞–¥–∞—é—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—é, –±–µ–∑–ø–µ–∫—É —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –¥–æ—Å—Ç—É–ø—É
5. **–ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥** ‚Äî –Ω–∞–π–∫—Ä–∞—â–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ —Ä–æ–∑–ø–æ–¥—ñ–ª—É –ª–æ–≥—ñ–∫–∏

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—Ä–∏–≥–µ—Ä–∏ –¥–ª—è:**
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∞—É–¥–∏—Ç—É
    - –í–∞–ª—ñ–¥–∞—Ü—ñ—ó —Å–∫–ª–∞–¥–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª
    - –ü—ñ–¥—Ç—Ä–∏–º–∫–∏ –¥–µ–Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—ó
    - –ö–∞—Å–∫–∞–¥–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

2. **–£–Ω–∏–∫–∞–π—Ç–µ —Ç—Ä–∏–≥–µ—Ä—ñ–≤ –¥–ª—è:**
    - –°–∫–ª–∞–¥–Ω–æ—ó –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏
    - –û–ø–µ—Ä–∞—Ü—ñ–π, —â–æ —á–∞—Å—Ç–æ –∑–º—ñ–Ω—é—é—Ç—å—Å—è
    - –õ–æ–≥—ñ–∫–∏, —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–æ—ó –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

3. **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è:**
    - –°–ø—Ä–æ—â–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
    - –ö–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É
    - –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ–≥–æ API

4. **–ú–∞—Ç–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ VIEW –¥–ª—è:**
    - –°–∫–ª–∞–¥–Ω–∏—Ö –∞–≥—Ä–µ–≥–∞—Ü—ñ–π
    - –ó–≤—ñ—Ç–Ω–æ—Å—Ç—ñ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
    - –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
