# –û–±—Ä–æ–±–∫–∞ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤

## –ü–ª–∞–Ω –ª–µ–∫—Ü—ñ—ó

1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤
2. –¢–∏–ø–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –≤–∞—Ä—Ç—ñ—Å–Ω–∞ –º–æ–¥–µ–ª—å
4. –Ü–Ω–¥–µ–∫—Å–∏ —Ç–∞ —ó—Ö —Ä–æ–ª—å –≤ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
5. –ü–ª–∞–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
6. –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –º–µ—Ç–æ–¥–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
7. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## **üéØ –ö–ª—é—á–æ–≤—ñ –ø–æ–Ω—è—Ç—Ç—è:**

**–û–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä –∑–∞–ø–∏—Ç—ñ–≤** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –°–£–ë–î, —â–æ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± –≤–∏–∫–æ–Ω–∞–Ω–Ω—è SQL-–∑–∞–ø–∏—Ç—É —à–ª—è—Ö–æ–º –∞–Ω–∞–ª—ñ–∑—É —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞–Ω—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

**–ü–ª–∞–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É, —â–æ –≤–∫–ª—é—á–∞—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π, –º–µ—Ç–æ–¥–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö —Ç–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –∑'—î–¥–Ω–∞–Ω—å.

**–í–∞—Ä—Ç—ñ—Å–Ω–∞ –º–æ–¥–µ–ª—å** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ—Ü—ñ–Ω–∫–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ä—ñ–∑–Ω–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç.

**–°–µ–ª–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** ‚Äî –≤—ñ–¥—Å–æ—Ç–æ–∫ –∑–∞–ø–∏—Å—ñ–≤ —É —Ç–∞–±–ª–∏—Ü—ñ, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –ø–µ–≤–Ω—ñ–π —É–º–æ–≤—ñ WHERE.

## **1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤**

## –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ö–µ–º–∞ –æ–±—Ä–æ–±–∫–∏

```mermaid
graph TD
    A[üî§ SQL –ó–∞–ø–∏—Ç] --> B[üìù –õ–µ–∫—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä]
    B --> C[üå≥ –°–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∏–π –ø–∞—Ä—Å–µ—Ä]
    C --> D[üîç –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä]
    D --> E[‚ö° –û–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä –∑–∞–ø–∏—Ç—ñ–≤]
    E --> F[üìã –ü–ª–∞–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è]
    F --> G[üöÄ –í–∏–∫–æ–Ω–∞–≤—á–∏–π –¥–≤–∏–∂–æ–∫]
    G --> H[üíæ –ú–µ–Ω–µ–¥–∂–µ—Ä –±—É—Ñ–µ—Ä—ñ–≤]
    H --> I[üíΩ –î–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö]
    I --> J[‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç]
```

## –ï—Ç–∞–ø–∏ –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤

### üìù **1. –õ–µ–∫—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑**

**–†–æ–∑–±–∏—Ç—Ç—è SQL –Ω–∞ —Ç–æ–∫–µ–Ω–∏:**

```sql
SELECT employee_name, salary
FROM employees
WHERE department_id = 10;
```

**–¢–æ–∫–µ–Ω–∏:**
- `SELECT` ‚Üê –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ
- `employee_name` ‚Üê —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
- `,` ‚Üê —Ä–æ–∑–¥—ñ–ª—é–≤–∞—á
- `salary` ‚Üê —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
- `FROM` ‚Üê –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ
- `employees` ‚Üê —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
- `WHERE` ‚Üê –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ
- `department_id` ‚Üê —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
- `=` ‚Üê –æ–ø–µ—Ä–∞—Ç–æ—Ä
- `10` ‚Üê —á–∏—Å–ª–æ–≤–∏–π –ª—ñ—Ç–µ—Ä–∞–ª

### üå≥ **2. –°–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑**

```mermaid
graph TD
    A[SELECT Statement] --> B[SELECT Clause]
    A --> C[FROM Clause]
    A --> D[WHERE Clause]

    B --> E[employee_name]
    B --> F[salary]

    C --> G[employees]

    D --> H[Comparison]
    H --> I[department_id = 10]
```

### üîç **3. –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑**

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏:**
- ‚úÖ **–Ü—Å–Ω—É–≤–∞–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å** —Ç–∞ —Å—Ç–æ–≤–ø—Ü—ñ–≤
- ‚úÖ **–í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ç–∏–ø—ñ–≤** –¥–∞–Ω–∏—Ö
- ‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ **–ö–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –∞–≥—Ä–µ–≥–∞—Ü—ñ–π** —Ç–∞ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è

### ‚ö° **4. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**

**–ó–∞–≤–¥–∞–Ω–Ω—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä–∞:**
- üîç –ê–Ω–∞–ª—ñ–∑ —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞–Ω—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- üìä –û—Ü—ñ–Ω–∫–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –∫–æ–∂–Ω–æ–≥–æ –ø–ª–∞–Ω—É
- üéØ –í–∏–±—ñ—Ä –Ω–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É

## **2. –¢–∏–ø–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó**

## –õ–æ–≥—ñ—á–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

### üîΩ **–ü—Ä–æ—à—Ç–æ–≤—Ö—É–≤–∞–Ω–Ω—è —Å–µ–ª–µ–∫—Ü—ñ—ó**

**–î–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:**
```sql
SELECT e.name, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id
WHERE e.salary > 50000;
```

**–ü—ñ—Å–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:**
```sql
SELECT e.name, d.department_name
FROM (SELECT * FROM employees WHERE salary > 50000) e
JOIN departments d ON e.department_id = d.department_id;
```

### üîÑ **–ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑'—î–¥–Ω–∞–Ω—å**

```mermaid
graph LR
    A[üõí orders<br/>1M –∑–∞–ø–∏—Å—ñ–≤] --> B[üë• customers<br/>10K –∑–∞–ø–∏—Å—ñ–≤]
    B --> C[üì¶ products<br/>1K –∑–∞–ø–∏—Å—ñ–≤]

    D[–§—ñ–ª—å—Ç—Ä: country='Ukraine'<br/>‚Üì 1K –∫–ª—ñ—î–Ω—Ç—ñ–≤] -.-> B
    E[–§—ñ–ª—å—Ç—Ä: category='Electronics'<br/>‚Üì 100 —Ç–æ–≤–∞—Ä—ñ–≤] -.-> C
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–æ—á–∞—Ç–∫—É —Ñ—ñ–ª—å—Ç—Ä—É—î–º–æ –º–∞–ª–µ–Ω—å–∫—ñ —Ç–∞–±–ª–∏—Ü—ñ!

## –§—ñ–∑–∏—á–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

### üìä **–ú–µ—Ç–æ–¥–∏ –¥–æ—Å—Ç—É–ø—É**

| –ú–µ—Ç–æ–¥ | –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ | –ü—Ä–∏–∫–ª–∞–¥ |
|-------|---------------------|---------|
| üîç **Table Scan** | –ù–µ–≤–µ–ª–∏–∫—ñ —Ç–∞–±–ª–∏—Ü—ñ –∞–±–æ –±—ñ–ª—å—à—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤ | `SELECT * FROM small_table` |
| üìá **Index Scan** | –°–µ–ª–µ–∫—Ç–∏–≤–Ω—ñ —É–º–æ–≤–∏ | `WHERE employee_id = 12345` |
| ‚ö° **Index Seek** | –¢–æ—á–Ω–∏–π –ø–æ—à—É–∫ –ø–æ –∫–ª—é—á—É | `WHERE id = 100` |

### üîó **–ê–ª–≥–æ—Ä–∏—Ç–º–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è**

**1. Nested Loop Join**
```mermaid
graph LR
    A[–¢–∞–±–ª–∏—Ü—è A<br/>10 –∑–∞–ø–∏—Å—ñ–≤] --> B[–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É]
    B --> C[–ü–æ—à—É–∫ —É —Ç–∞–±–ª–∏—Ü—ñ B<br/>1000 –∑–∞–ø–∏—Å—ñ–≤]
    C --> D[–†–µ–∑—É–ª—å—Ç–∞—Ç]
```
**–ö—Ä–∞—â–µ –¥–ª—è:** –Ω–µ–≤–µ–ª–∏–∫–∏—Ö —Ç–∞–±–ª–∏—Ü—å

**2. Hash Join**
```mermaid
graph TD
    A[–ú–µ–Ω—à–∞ —Ç–∞–±–ª–∏—Ü—è] --> B[–°—Ç–≤–æ—Ä–µ–Ω–Ω—è<br/>—Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ñ]
    C[–ë—ñ–ª—å—à–∞ —Ç–∞–±–ª–∏—Ü—è] --> D[–ü–æ—à—É–∫ –ø–æ —Ö–µ—à—É]
    B --> E[–ó'—î–¥–Ω–∞–Ω–Ω—è]
    D --> E
```
**–ö—Ä–∞—â–µ –¥–ª—è:** –≤–µ–ª–∏–∫–∏—Ö —Ç–∞–±–ª–∏—Ü—å –∑ equi-joins

**3. Sort-Merge Join**
```mermaid
graph TD
    A[–¢–∞–±–ª–∏—Ü—è A] --> B[–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è]
    C[–¢–∞–±–ª–∏—Ü—è B] --> D[–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è]
    B --> E[–ó–ª–∏—Ç—Ç—è]
    D --> E
```
**–ö—Ä–∞—â–µ –¥–ª—è:** –≤–∂–µ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö

## **3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –≤–∞—Ä—Ç—ñ—Å–Ω–∞ –º–æ–¥–µ–ª—å**

## –°—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### üìä **–¢–∏–ø–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**

**1. –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—å**
```sql
-- PostgreSQL
SELECT schemaname, tablename,
       n_tup_ins - n_tup_del as row_count
FROM pg_stat_user_tables;
```

**2. –†–æ–∑–ø–æ–¥—ñ–ª –∑–Ω–∞—á–µ–Ω—å (–≥—ñ—Å—Ç–æ–≥—Ä–∞–º–∏)**
```mermaid
graph LR
    A[–ó–∞—Ä–ø–ª–∞—Ç–∞] --> B[30K-40K: 20%]
    A --> C[40K-60K: 50%]
    A --> D[60K-80K: 25%]
    A --> E[80K+: 5%]
```

**3. –°–µ–ª–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**
```sql
-- –í–∏—Å–æ–∫–∞ —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (üëç –¥–ª—è —ñ–Ω–¥–µ–∫—Å—É)
SELECT * FROM employees WHERE employee_id = 12345;  -- 0.001%

-- –ù–∏–∑—å–∫–∞ —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (üëé –¥–ª—è —ñ–Ω–¥–µ–∫—Å—É)
SELECT * FROM employees WHERE status = 'ACTIVE';    -- 95%
```

## –í–∞—Ä—Ç—ñ—Å–Ω–∞ –º–æ–¥–µ–ª—å

### üí∞ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤–∞—Ä—Ç–æ—Å—Ç—ñ**

**1. I/O –≤–∞—Ä—Ç—ñ—Å—Ç—å (–Ω–∞–π–¥–æ—Ä–æ–∂—á–∞)**
```
I/O_cost = pages_to_read √ó random_page_cost +
           sequential_pages √ó seq_page_cost
```

**2. CPU –≤–∞—Ä—Ç—ñ—Å—Ç—å**
```
CPU_cost = rows_processed √ó cpu_tuple_cost +
           comparisons √ó cpu_operator_cost
```

**3. –ú–µ—Ä–µ–∂–µ–≤–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å** (–¥–ª—è —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏—Ö —Å–∏—Å—Ç–µ–º)

### üìà **–ü—Ä–∏–∫–ª–∞–¥ –æ—Ü—ñ–Ω–∫–∏**

```sql
SELECT * FROM employees
WHERE department_id = 10 AND salary > 50000;
```

| –í–∞—Ä—ñ–∞–Ω—Ç | –í–∞—Ä—Ç—ñ—Å—Ç—å | –û–ø–∏—Å |
|---------|----------|------|
| üîç Table Scan | 1000 | –ß–∏—Ç–∞–Ω–Ω—è –≤—Å—ñ—î—ó —Ç–∞–±–ª–∏—Ü—ñ |
| üìá Index on dept_id | 100 | –Ü–Ω–¥–µ–∫—Å + —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è |
| ‚ö° Composite Index | 10 | –û–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç |

## **4. –Ü–Ω–¥–µ–∫—Å–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**

## –¢–∏–ø–∏ —ñ–Ω–¥–µ–∫—Å—ñ–≤

### üå≥ **B-tree —ñ–Ω–¥–µ–∫—Å–∏**

```mermaid
graph TD
    A[Root: 50000, 75000] --> B[Leaf: 30K, 40K, 45K]
    A --> C[Leaf: 55K, 60K, 70K]
    A --> D[Leaf: 80K, 90K, 95K]
```

**‚úÖ –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –¥–ª—è:**
- –¢–æ—á–Ω—ñ –ø–æ—à—É–∫–∏: `salary = 75000`
- –î—ñ–∞–ø–∞–∑–æ–Ω–∏: `salary BETWEEN 50000 AND 100000`
- –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è: `ORDER BY salary`

### # **Hash —ñ–Ω–¥–µ–∫—Å–∏**

```sql
-- PostgreSQL
CREATE INDEX idx_employee_id_hash
ON employees USING HASH(employee_id);

-- –ï—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ç—ñ–ª—å–∫–∏ –¥–ª—è =
SELECT * FROM employees WHERE employee_id = 12345;
```

## –°—Ç—Ä–∞—Ç–µ–≥—ñ—ó —ñ–Ω–¥–µ–∫—Å—É–≤–∞–Ω–Ω—è

### üéØ **–ü—Ä–∞–≤–∏–ª–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—ñ–≤**

**1. –Ü–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ WHERE —É–º–æ–≤–∏**
```sql
-- –Ø–∫—â–æ —á–∞—Å—Ç–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
SELECT * FROM orders WHERE customer_id = 123;

-- –°—Ç–≤–æ—Ä–∏—Ç–∏ —ñ–Ω–¥–µ–∫—Å
CREATE INDEX idx_orders_customer_id ON orders(customer_id);
```

**2. –Ü–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ JOIN —Å—Ç–æ–≤–ø—Ü—ñ**
```sql
-- –î–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∑'—î–¥–Ω–∞–Ω–Ω—è
SELECT * FROM orders o
JOIN customers c ON o.customer_id = c.customer_id;

-- –Ü–Ω–¥–µ–∫—Å–∏ –Ω–∞ –æ–±–æ—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö JOIN
CREATE INDEX idx_orders_customer_id ON orders(customer_id);
```

**3. –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏**
```sql
-- –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ —Å—Ç–æ–≤–ø—Ü—ñ–≤
CREATE INDEX idx_dept_salary ON employees(department_id, salary);

-- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é
WHERE department_id = 10 AND salary > 50000

-- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —á–∞—Å—Ç–∫–æ–≤–æ
WHERE department_id = 10

-- ‚ùå –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
WHERE salary > 50000
```

### ‚öñÔ∏è **–ë–∞–ª–∞–Ω—Å —ñ–Ω–¥–µ–∫—Å—ñ–≤**

**‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚ö° –®–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ –¥–∞–Ω–∏—Ö
- üöÄ –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ JOIN –æ–ø–µ—Ä–∞—Ü—ñ—ó
- üìà –®–≤–∏–¥–∫–µ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è

**‚ùå –ù–µ–¥–æ–ª—ñ–∫–∏:**
- üíæ –î–æ–¥–∞—Ç–∫–æ–≤–µ –º—ñ—Å—Ü–µ –Ω–∞ –¥–∏—Å–∫—É
- üêå –£–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–Ω—è INSERT/UPDATE/DELETE
- üîß –ù–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É

## **5. –ü–ª–∞–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤**

## –ß–∏—Ç–∞–Ω–Ω—è –ø–ª–∞–Ω—ñ–≤ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### üìã **PostgreSQL EXPLAIN**

```sql
EXPLAIN SELECT e.name, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id
WHERE e.salary > 50000;
```

### üìä **–ü—Ä–∏–∫–ª–∞–¥ –ø–ª–∞–Ω—É**

```
Nested Loop  (cost=0.29..8.32 rows=1 width=64)
  ->  Seq Scan on employees e  (cost=0.00..4.00 rows=1 width=36)
        Filter: (salary > 50000)
  ->  Index Scan using departments_pkey on departments d
        (cost=0.29..4.31 rows=1 width=32)
        Index Cond: (department_id = e.department_id)
```

### üîç **–Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è**

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø–ª–∞–Ω—É:**

| –ï–ª–µ–º–µ–Ω—Ç | –ó–Ω–∞—á–µ–Ω–Ω—è | –ü–æ—è—Å–Ω–µ–Ω–Ω—è |
|---------|----------|-----------|
| **cost=0.29..8.32** | –í–∞—Ä—Ç—ñ—Å—Ç—å | –ü–æ—á–∞—Ç–∫–æ–≤–∞..–∑–∞–≥–∞–ª—å–Ω–∞ |
| **rows=1** | –†—è–¥–∫–∏ | –û—á—ñ–∫—É–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å |
| **width=64** | –®–∏—Ä–∏–Ω–∞ | –†–æ–∑–º—ñ—Ä —Ä—è–¥–∫–∞ –≤ –±–∞–π—Ç–∞—Ö |

**–¢–∏–ø–∏ –æ–ø–µ—Ä–∞—Ü—ñ–π:**
- üîç **Seq Scan** ‚Äî –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–µ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è
- üìá **Index Scan** ‚Äî —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É
- üîÑ **Nested Loop** ‚Äî –≤–∫–ª–∞–¥–µ–Ω–∏–π —Ü–∏–∫–ª
- # **Hash Join** ‚Äî —Ö–µ—à –∑'—î–¥–Ω–∞–Ω–Ω—è

## –ê–Ω–∞–ª—ñ–∑ —Ñ–∞–∫—Ç–∏—á–Ω–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

```sql
EXPLAIN (ANALYZE, BUFFERS)
SELECT e.name, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id
WHERE e.salary > 50000;
```

**–†–æ–∑—à–∏—Ä–µ–Ω–∏–π –≤–∏–≤—ñ–¥:**
```
Nested Loop (cost=0.29..8.32 rows=1 width=64)
           (actual time=0.045..0.048 rows=1 loops=1)
  Buffers: shared hit=4
  ->  Seq Scan on employees e (actual time=0.023..0.025 rows=1 loops=1)
        Filter: (salary > 50000)
        Rows Removed by Filter: 99
        Buffers: shared hit=1
Planning Time: 0.123 ms
Execution Time: 0.071 ms
```

**üéØ –ö–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏:**
- **actual time** ‚Äî —Ñ–∞–∫—Ç–∏—á–Ω–∏–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- **Buffers: shared hit** ‚Äî –∫–µ—à-–ø–æ–ø–∞–¥–∞–Ω–Ω—è
- **Rows Removed by Filter** ‚Äî –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω—ñ —Ä—è–¥–∫–∏

## **6. –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –º–µ—Ç–æ–¥–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó**

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è SELECT

### ‚ùå **–£–Ω–∏–∫–∞—Ç–∏ SELECT * **

```sql
-- –ù–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
SELECT * FROM employees WHERE department_id = 10;

-- ‚úÖ –ï—Ñ–µ–∫—Ç–∏–≤–Ω–æ
SELECT employee_id, name, salary
FROM employees WHERE department_id = 10;
```

### üîç **EXISTS vs IN**

```sql
-- ‚ùå –ú–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
SELECT * FROM customers
WHERE customer_id IN (
    SELECT customer_id FROM orders
    WHERE order_date > '2023-01-01'
);

-- ‚úÖ –ë—ñ–ª—å—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
SELECT * FROM customers c
WHERE EXISTS (
    SELECT 1 FROM orders o
    WHERE o.customer_id = c.customer_id
    AND o.order_date > '2023-01-01'
);
```

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è JOIN

### üìä **–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ —Ç–∞–±–ª–∏—Ü—å**

```mermaid
graph LR
    A[üë• customers<br/>10K –∑–∞–ø–∏—Å—ñ–≤<br/>country='Ukraine'<br/>‚Üì 1K] --> B[üõí orders<br/>1M –∑–∞–ø–∏—Å—ñ–≤]
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –°–ø–æ—á–∞—Ç–∫—É —Ñ—ñ–ª—å—Ç—Ä—É—î–º–æ –º–µ–Ω—à—É —Ç–∞–±–ª–∏—Ü—é!

### üîó **–¢–∏–ø–∏ –∑'—î–¥–Ω–∞–Ω—å**

```sql
-- ‚úÖ INNER JOIN –¥–ª—è –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –∑–≤'—è–∑–∫—ñ–≤
SELECT e.name, d.department_name
FROM employees e
INNER JOIN departments d ON e.department_id = d.department_id;

-- ‚úÖ LEFT JOIN –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –∑–ª—ñ–≤–∞
SELECT e.name, COALESCE(d.department_name, 'No Department') as dept
FROM employees e
LEFT JOIN departments d ON e.department_id = d.department_id;
```

## –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤

### üîÑ **–ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–µ–ª—å–æ–≤–∞–Ω–∏—Ö –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤**

```sql
-- ‚ùå –ö–æ—Ä–µ–ª—å–æ–≤–∞–Ω–∏–π –ø—ñ–¥–∑–∞–ø–∏—Ç (–ø–æ–≤—ñ–ª—å–Ω–æ)
SELECT employee_name
FROM employees e1
WHERE salary = (
    SELECT MAX(salary) FROM employees e2
    WHERE e2.department_id = e1.department_id
);

-- ‚úÖ Window function (—à–≤–∏–¥—à–µ)
SELECT employee_name
FROM (
    SELECT employee_name, salary,
           MAX(salary) OVER (PARTITION BY department_id) as max_salary
    FROM employees
) t
WHERE salary = max_salary;
```

### üìù **Common Table Expressions**

```sql
-- ‚úÖ CTE –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ —Ç–∞ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
WITH department_stats AS (
    SELECT department_id,
           AVG(salary) as avg_salary,
           COUNT(*) as employee_count
    FROM employees
    GROUP BY department_id
),
high_paying_depts AS (
    SELECT department_id
    FROM department_stats
    WHERE avg_salary > 60000 AND employee_count > 5
)
SELECT e.name, e.salary, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id
JOIN high_paying_depts hpd ON e.department_id = hpd.department_id;
```

## **7. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**

## –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

### üìä **–°–∏—Å—Ç–µ–º–Ω—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è PostgreSQL**

```sql
-- üêå –ù–∞–π–ø–æ–≤—ñ–ª—å–Ω—ñ—à—ñ –∑–∞–ø–∏—Ç–∏
SELECT query, mean_time, calls, total_time
FROM pg_stat_statements
ORDER BY mean_time DESC LIMIT 10;

-- üìá –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ñ–Ω–¥–µ–∫—Å—ñ–≤
SELECT schemaname, tablename, indexname,
       idx_tup_read, idx_tup_fetch
FROM pg_stat_user_indexes
ORDER BY idx_tup_read DESC;

-- üîÑ –ê–∫—Ç–∏–≤–Ω—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è
SELECT pid, usename, application_name,
       client_addr, state, query
FROM pg_stat_activity
WHERE state = 'active';
```

### üìù **–õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤**

```sql
-- –õ–æ–≥—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –¥–æ–≤—à–µ 1 —Å–µ–∫—É–Ω–¥–∏
SET log_min_duration_statement = 1000;
```

## –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### üö´ **1. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —ñ–Ω–¥–µ–∫—Å—ñ–≤**

**–°–∏–º–ø—Ç–æ–º–∏:**
- üêå –ü–æ–≤—ñ–ª—å–Ω—ñ SELECT –∑–∞–ø–∏—Ç–∏
- üî• –í–∏—Å–æ–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CPU
- üîç Sequential Scans —É –ø–ª–∞–Ω–∞—Ö

**–†—ñ—à–µ–Ω–Ω—è:**
```sql
-- –ê–Ω–∞–ª—ñ–∑ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤ –¥–ª—è —ñ–Ω–¥–µ–∫—Å—É–≤–∞–Ω–Ω—è
SELECT schemaname, tablename, attname, n_distinct
FROM pg_stats
WHERE n_distinct > 100
ORDER BY tablename, attname;
```

### üìä **2. –ó–∞—Å—Ç–∞—Ä—ñ–ª—ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**

**–°–∏–º–ø—Ç–æ–º–∏:**
- üéØ –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ –ø–ª–∞–Ω–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- üîÑ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è

**–†—ñ—à–µ–Ω–Ω—è:**
```sql
-- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
ANALYZE employees;

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
ALTER TABLE employees
SET (autovacuum_analyze_scale_factor = 0.05);
```

### üîí **3. –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü—ñ—è**

**–°–∏–º–ø—Ç–æ–º–∏:**
- ‚è≥ –î–æ–≤–≥—ñ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- üìâ –ó–Ω–∏–∂–µ–Ω–Ω—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ—ó –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ

**–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:**
```sql
-- –ü–µ—Ä–µ–≥–ª—è–¥ –±–ª–æ–∫—É–≤–∞–Ω—å
SELECT blocked_locks.pid AS blocked_pid,
       blocking_locks.pid AS blocking_pid,
       blocked_activity.query AS blocked_statement
FROM pg_catalog.pg_locks blocked_locks
JOIN pg_catalog.pg_stat_activity blocked_activity
  ON blocked_activity.pid = blocked_locks.pid
-- ... (–¥–µ—Ç–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –±–ª–æ–∫—É–≤–∞–Ω—å)
```

## –°—É—á–∞—Å–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏

### ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- üìá **–ê–¥–∞–ø—Ç–∏–≤–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è
- üß† **Machine Learning** ‚Äî –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ–π
- üìä **–ê–≤—Ç–æ–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** ‚Äî –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

### üìä **Columnar Storage**

```sql
-- –î–ª—è –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å
CREATE FOREIGN TABLE analytics_orders (
    order_id bigint,
    customer_id bigint,
    order_date date,
    amount decimal
) SERVER cstore_server
OPTIONS(compression 'pglz');
```

### üíæ **–ú–∞—Ç–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è**

```sql
-- –ö–µ—à—É–≤–∞–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å
CREATE MATERIALIZED VIEW monthly_sales AS
SELECT DATE_TRUNC('month', order_date) as month,
       SUM(amount) as total_sales,
       COUNT(*) as order_count
FROM orders
GROUP BY DATE_TRUNC('month', order_date);

-- –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
REFRESH MATERIALIZED VIEW monthly_sales;
```

## **–ü—ñ–¥—Å—É–º–æ–∫ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó**

### üéØ **–ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó**

1. **üîç –†–æ–∑—É–º—ñ–Ω–Ω—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏** ‚Äî –∑–Ω–∞–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä–∞
2. **üìá –ü—Ä–∞–≤–∏–ª—å–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏** ‚Äî –æ—Å–Ω–æ–≤–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
3. **üìä –ê–Ω–∞–ª—ñ–∑ –ø–ª–∞–Ω—ñ–≤** ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
4. **üìà –ó–Ω–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö** ‚Äî —Ä–æ–∑–ø–æ–¥—ñ–ª, –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω—ñ—Å—Ç—å, —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
5. **üìä –ü–æ—Å—Ç—ñ–π–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** ‚Äî –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### ‚úÖ **–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó**

- üéØ **–ü–∏—à—ñ—Ç—å —Å–µ–ª–µ–∫—Ç–∏–≤–Ω—ñ –∑–∞–ø–∏—Ç–∏** ‚Äî —É–Ω–∏–∫–∞–π—Ç–µ SELECT *
- üìá **–°—Ç–≤–æ—Ä—é–π—Ç–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏** ‚Äî –∞–ª–µ –Ω–µ –∑–ª–æ–≤–∂–∏–≤–∞–π—Ç–µ
- üìä **–ê–Ω–∞–ª—ñ–∑—É–π—Ç–µ –ø–ª–∞–Ω–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ EXPLAIN
- üîÑ **–û–Ω–æ–≤–ª—é–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** ‚Äî –¥–ª—è —Ç–æ—á–Ω–∏—Ö –ø–ª–∞–Ω—ñ–≤
- üìà **–ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** ‚Äî –≤–∏—è–≤–ª—è–π—Ç–µ –ø—Ä–æ–±–ª–µ–º–∏ —Ä–∞–Ω–æ
